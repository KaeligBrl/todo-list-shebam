{% extends 'back/index.html.twig' %}

{% block title %}Liste des tâches - Administration{% endblock %}

{% block body %}

		<link rel="stylesheet" href="{{ asset('assets/js/custom.js') }}">

	<div>
		{% block titre_admin_page %}Liste de nos tâches{% endblock %}
	</div>
	{% block admin_utilisateur %}
		<div class="container">
			<div class="text-center bg-yellow-shebam color-white-shebam p-3">Priorité 1
				<div class="add-icon-custom d-flex flew-row-reverse">			
					<a href="{{ path('task_list_add_admin') }}" type="button" class="btn btn-outline-light">
						<i class="fas fa-plus-circle"></i>
					</a>
				</div>
			</div>
			<table class="table table-striped table-light" data-toggle="table">
				<thead class="bg-yellow-dark color-white-shebam">
					<tr>
						<th scope="col">Client</th>
						<th scope="col">Sujet</th>
						<th scope="col">Personne(s) Désignée(s)</th>
						<th scope="col">Statut</th>
						<th scope="col">Remarque</th>
						<th scope="col">Action</th>
					</tr>
				</thead>
				<tbody>
						{% for tache in taches %}
					<tr>
						<td>{{tache.customer}}</td>
						<td>{{tache.subject}}</td>
						<td>{% for tache in tache.users %}
								{{ tache.firstname }} <br>
							{% endfor %}
						</td>
						<td>{{tache.status.name}}</td>
						<td>{{tache.comment}}</td>
						<td>
							<a href="{{ path('task_list_modify_admin', {"id": tache.id}) }}"><i class="fas fa-cog"></i></a>
								|
							<a href="{{ path('task_list_detete_admin', {"id": tache.id}) }}" onclick="return confirm('Attention vous vous apprettez à supprimer une tâche')"><i class="fas fa-trash"></i></a>							
						</td>
					</tr>
						{% endfor %}
				</tbody>
			</table>

			<div class="mb-5"></div>

			<div class="text-center bg-pink-shebam color-white-shebam p-3">Rendez-vous
				<div class="add-icon-custom d-flex flew-row-reverse">				
					<a href="{{ path('task_appointment_add_admin') }}" type="button" class="btn btn-outline-light">
						<i class="fas fa-plus-circle"></i>
					</a>
				</div>
			</div>
			<table class="table table-striped table-light" data-toggle="table">
				<thead class="bg-yellow-dark color-white-shebam">
					<tr>
						<th scope="col">Entreprise</th>
						<th scope="col">Sujet</th>
						<th>Personne(s) Désignée(s)</th>
						<th scope="col">Statut</th>
						<th scope="col">Date et heure</th>
						<th scope="col">Action</th>
					</tr>
				</thead>
				<tbody>
					{% for rendezvous in rendezvous %}
						<tr>
							<td>{{rendezvous.name}}</td>
							<td>{{rendezvous.sujet}}</td>
							<td>
							{% for rendezvous in rendezvous.utilisateur %}
								{{ rendezvous.firstname }} <br>
							{% endfor %}
							</td>
							<td>{{rendezvous.statut}}</td>
							<td>{{ rendezvous.heuredurendezvous|date('j F Y')  }} à {{rendezvous.heuredurendezvous|date('H:i')}}</td>
							<td>
								<a href="{{ path('task_appointment_modify_admin', {"id": rendezvous.id}) }}"><i class="fas fa-cog"></i></a>
								|
								<a href="{{ path('task_appointment_detete_admin', {"id": rendezvous.id}) }}" onclick="return confirm('Attention vous vous apprettez à supprimer un rendez-vous')"><i class="fas fa-trash"></i></a>
							</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>

			<div class="mb-5"></div>

			<div class="text-center bg-blue-light-shebam color-white-shebam p-3 align-bottom">Devis
				<div class="add-icon-custom d-flex flew-row-reverse">				
					<a href="{{ path('task_quote_add_admin') }}" type="button" class="btn btn-outline-light">
						<i class="fas fa-plus-circle"></i>
					</a>
				</div>
			</div>
			<table class="table table-striped table-light" data-toggle="table">
				<thead class="bg-yellow-dark color-white-shebam">
					<tr>
						<th scope="col">Client</th>
						<th scope="col">Sujet</th>
						<th>Personne(s) Désignée(s)</th>
						<th scope="col">Statut</th>
						<th scope="col">Remarque</th>
						<th scope="col">Action</th>
					</tr>
				</thead>
				<tbody>
					{% for quote in quote %}
						<tr>
							<td>{{ quote.enterprise }}</td>
							<td>{{ quote.subject }}</td>
							<td>
							{% for quote in quote.person %}
								{{ quote.firstname }} <br>
							{% endfor %}
							</td>
							<td>{{ quote.status }}</td>
							<td>{{ quote.comment }}</td>
							<td>
								<a href="{{ path('task_quote_modify_admin', {"id": quote.id}) }}"><i class="fas fa-cog"></i></a>
								|
								<a href="{{ path('task_quote_detete_admin', {"id": quote.id}) }}" onclick="return confirm('Attention vous vous apprettez à supprimer un devis')"><i class="fas fa-trash"></i></a>
							</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>

			<div class="mb-5"></div>

			<div class="text-center bg-green-light-shebam color-white-shebam p-3">Priorité 2
				<div class="add-icon-custom d-flex flew-row-reverse">				
					<a href="{{ path('task2_list_add_admin') }}" type="button" class="btn btn-outline-light">
						<i class="fas fa-plus-circle"></i>
					</a>
				</div>
			</div>
			<table class="table table-striped table-light" data-toggle="table">
				<thead class="bg-yellow-dark color-white-shebam">
					<tr>
						<th scope="col">Client</th>
						<th scope="col">Sujet</th>
						<th scope="col">Personne(s) Désignée(s)</th>
						<th scope="col">Statut</th>
						<th scope="col">Remarque</th>
						<th scope="col">Action</th>
					</tr>
				</thead>
				<tbody>
						{% for task2 in task2 %}
					<tr>
						<td>{{task2.customer}}</td>
						<td>{{task2.subject}}</td>
						<td>{% for task2 in task2.users %}
								{{ task2.firstname }} <br>
							{% endfor %}
						</td>
						<td>{{task2.status.name}}</td>
						<td>{{task2.comment}}</td>
						<td>
							<a href="{{ path('task2_list_modify_admin', {"id": task2.id}) }}"><i class="fas fa-cog"></i></a>
								|
							<a href="{{ path('task2_list_detete_admin', {"id": task2.id}) }}" onclick="return confirm('Attention vous vous apprettez à supprimer une tâche P2')"><i class="fas fa-trash"></i></a>							
						</td>
					</tr>
						{% endfor %}
				</tbody>
			</table>
		</div>
	{% endblock %}
{% endblock %}